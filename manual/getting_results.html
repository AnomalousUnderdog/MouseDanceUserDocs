<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Getting Results | MouseDance User Docs </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Getting Results | MouseDance User Docs ">
    <meta name="generator" content="docfx 2.59.3.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/night-owl.min.css">
    <link rel="stylesheet" href="../styles/colors.css">
    <link rel="stylesheet" href="../styles/discord.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>

  <body>
        <div class="top-navbar">

            <a class="burger-icon" onclick="toggleMenu()">
                <svg name="Hamburger" style="vertical-align: middle;" width="24" height="24" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M20 6H4V9H20V6ZM4 10.999H20V13.999H4V10.999ZM4 15.999H20V18.999H4V15.999Z"></path></svg>
            </a>

            
            <a class="brand" href="../index.html">
              <img src="../logo.svg" alt="MouseDance" class="logomark">
              <span class="brand-title">MouseDance</span>
            </a>
        </div>

        <div class="body-content">

            <div id="blackout" class="blackout" onclick="toggleMenu()"></div>

            <nav id="sidebar" role="navigation">

                <div class="sidebar">
                    
                    
                    <div>
                      <div class="mobile-hide">
                        
                        <a class="brand" href="../index.html">
                          <img src="../logo.svg" alt="MouseDance" class="logomark">
                          <span class="brand-title">MouseDance</span>
                        </a>  </div>

                    
                      <div id="navbar">
                      </div>
                    
                    </div>


                    <div class="sidebar-item-separator"></div>

                        
                        <div id="sidetoggle">
                          <div id="sidetoc"></div>
                        </div>

                </div>

                <div class="footer">
                  MouseDance User Docs powered by <a href='https://dotnet.github.io/docfx'>DocFx</a>, <a href='https://github.com/jbltx/DiscordFX'>DiscordFx</a>
                  
                </div>
            </nav>

            <main class="main-panel">


                <div role="main" class="main-panel-content hide-when-search">

                        
                        <div class="subnav navbar navbar-default">
                          <div class="container hide-when-search" id="breadcrumb">
                            <ul class="breadcrumb">
                              <li></li>
                            </ul>
                          </div>
                        </div>

                    <article class="content wrap" id="_content" data-uid="">
<h1 id="getting-results">Getting Results</h1>

<p>If you want to be notified of when the Beatmap has ended (whether the player won or not), implement <a class="xref" href="../api/MouseDance.Runtime.Callbacks.IBeatmapEnd.html"><code>IBeatmapEnd</code></a> in your class like this, and make sure to call <a class="xref" href="../api/MouseDance.Runtime.BeatmapRunner.html#MouseDance_Runtime_BeatmapRunner_SetBeatmapEnd_MouseDance_Runtime_Callbacks_IBeatmapEnd_"><code>SetBeatmapEnd</code></a> before <a class="xref" href="../api/MouseDance.Runtime.BeatmapRunner.html#MouseDance_Runtime_BeatmapRunner_LoadAndStart_UnityEngine_TextAsset_UnityEngine_AudioClip_"><code>LoadAndStart</code></a>:</p>
<pre><code class="lang-csharp">public class BasicUsage : UnityEngine.MonoBehaviour, MouseDance.Runtime.Callbacks.IBeatmapEnd
{
  public MouseDance.Runtime.BeatmapRunner _beatmapRunner;
  public UnityEngine.TextAsset _osuFile;
  public UnityEngine.AudioClip _song;
  
  void Start()
  {
    _beatmapRunner.SetBeatmapEnd(this);
    _beatmapRunner.LoadAndStart(_osuFile, _song);
  }
  
  public void OnBeatmapEnd(MouseDance.Runtime.IBeatmapResults results)
  {
    print(results.PlayerWin ? &quot;Player Won!&quot; : &quot;Player Lost!&quot;);
    print($&quot;Score: {results.Score}&quot;);
    
    var hitObjects = results.HitObjects;
    for (int n = 0, len = hitObjects.Count; n &lt; len; ++n)
    {
      string type = hitObjects[n] switch
      {
        OsuParsers.Beatmaps.Objects.HitCircle _ =&gt; &quot;Hit Circle&quot;,
        OsuParsers.Beatmaps.Objects.Slider _ =&gt; &quot;Slider&quot;,
        _ =&gt; &quot;Hit Object&quot;
      };
      
      string hit = results.WasHit(n) ? &quot;Hit&quot; : &quot;Miss&quot;;
      
      print($&quot;Hit Object {n+1}/{len} ({type}): {hit}&quot;);
    }
  }
}
</code></pre>
<p>Note that <a class="xref" href="../api/MouseDance.Runtime.BeatmapRunner.html#MouseDance_Runtime_BeatmapRunner_SetBeatmapEnd_MouseDance_Runtime_Callbacks_IBeatmapEnd_"><code>BeatmapRunner.SetBeatmapEnd</code></a> is called before starting the beatmap.</p>
<p>Your <code>OnBeatmapEnd</code> will be called automatically by the <code>BeatmapRunner</code> when the game ends. You'll get an <a class="xref" href="../api/MouseDance.Runtime.IBeatmapResults.html"><code>IBeatmapResults</code></a> that gives information on the player's score, which Hit Objects they hit or miss, how accurate they were, etc. It's up to you how you want to display that information. The demo scenes have sample code that shows the score getting displayed in the GUI.</p>
<div class="WARNING">
<h5>Warning</h5>
<p>If your <code>OnBeatmapEnd</code> doesn't seem to be getting called, check if you've properly called <a class="xref" href="../api/MouseDance.Runtime.BeatmapRunner.html#MouseDance_Runtime_BeatmapRunner_SetBeatmapEnd_MouseDance_Runtime_Callbacks_IBeatmapEnd_"><code>BeatmapRunner.SetBeatmapEnd</code></a>.</p>
<p><code>BeatmapRunner</code> in the Inspector will show you which callbacks have been registered. The one labeled <code>IBeatmapEnd</code> should be green once the game is running.</p>
<p>The name of the registered callback's concrete type will be displayed (namespace and class name). If it is a <a class="xref" href="https://docs.unity3d.com/ScriptReference/MonoBehaviour.html"><code>MonoBehaviour</code></a> type, it'll show the actual file instead. You can click on that to ping it in the Project tab.</p>
<p><img src="../resources/BeatmapRunnerCountdownEnd.png" alt="Beatmap Runner Diagnostics"></p>
<p>This GUI is only for debugging. It is not designed or intended to register callbacks from the GUI.</p>
</div>
</article>
              
                </div>
            </main>
        </div>

        
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
<script type="text/javascript" src="../styles/jquery.twbsPagination.js"></script>
<script type="text/javascript" src="../styles/url.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>
<script type="text/javascript" src="../styles/docfx.js"></script>
<script type="text/javascript" src="../styles/main.js"></script>

    </body>

</html>
