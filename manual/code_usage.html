<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Code Usage | MouseDance User Docs </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Code Usage | MouseDance User Docs ">
    <meta name="generator" content="docfx 2.59.3.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/night-owl.min.css">
    <link rel="stylesheet" href="../styles/colors.css">
    <link rel="stylesheet" href="../styles/discord.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../">
    
  </head>

  <body>
        <div class="top-navbar">

            <a class="burger-icon" onclick="toggleMenu()">
                <svg name="Hamburger" style="vertical-align: middle;" width="24" height="24" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M20 6H4V9H20V6ZM4 10.999H20V13.999H4V10.999ZM4 15.999H20V18.999H4V15.999Z"></path></svg>
            </a>

            
            <a class="brand" href="../index.html">
              <img src="../logo.svg" alt="MouseDance" class="logomark">
              <span class="brand-title">MouseDance</span>
            </a>
        </div>

        <div class="body-content">

            <div id="blackout" class="blackout" onclick="toggleMenu()"></div>

            <nav id="sidebar" role="navigation">

                <div class="sidebar">
                    
                    
                    <div>
                      <div class="mobile-hide">
                        
                        <a class="brand" href="../index.html">
                          <img src="../logo.svg" alt="MouseDance" class="logomark">
                          <span class="brand-title">MouseDance</span>
                        </a>  </div>

                          <div class="sidesearch">
                              <form id="search" role="search" class="search">
                                  <svg width="20" height="20" class="search-icon" viewbox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                                  <input type="text" id="search-query" placeholder="Search" autocomplete="off">
                              </form>
                          </div>
                    
                      <div id="navbar">
                      </div>
                    
                    </div>


                    <div class="sidebar-item-separator"></div>

                        
                        <div id="sidetoggle">
                          <div id="sidetoc"></div>
                        </div>

                </div>

                <div class="footer">
                  MouseDance User Docs powered by <a href='https://dotnet.github.io/docfx'>DocFx</a>, <a href='https://github.com/jbltx/DiscordFX'>DiscordFx</a>
                  
                </div>
            </nav>

            <main class="main-panel">

                    
                    <div id="search-results" class="main-panel-content" style="display: none;">
                      <h1 class="search-list">Search Results for <span></span></h1>
                      <div class="sr-items">
                        <p><svg class="index-loading" fill="none" stroke="currentColor" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></p>
                      </div>
                      <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
                    </div>
                <div role="main" class="main-panel-content hide-when-search">

                        
                        <div class="subnav navbar navbar-default">
                          <div class="container hide-when-search" id="breadcrumb">
                            <ul class="breadcrumb">
                              <li></li>
                            </ul>
                          </div>
                        </div>

                    <article class="content wrap" id="_content" data-uid="">
<h1 id="code-usage">Code Usage</h1>

<div class="TIP">
<h5>Tip</h5>
<p>This section is meant for experienced developers who are comfortable with programming in Unity. If you are unfamiliar with programming, or you don't understand the source code examples here, please refer to Unity's <a href="https://learn.unity.com/">Learn platform</a> first.</p>
</div>
<p>The simplest way you can get a beatmap to run from code looks like this:</p>
<pre><code class="lang-csharp">public class BasicUsage : UnityEngine.MonoBehaviour
{
  public MouseDance.Runtime.BeatmapRunner _beatmapRunner;
  public UnityEngine.TextAsset _osuFile;
  public UnityEngine.AudioClip _song;

  void Start()
  {
    _beatmapRunner.LoadAndStart(_osuFile, _song);
  }
}
</code></pre>
<p><img src="../resources/BasicUsageInspector.png" alt="BasicUsage component in Inspector"></p>
<div class="CAUTION">
<h5>Caution</h5>
<p>Take note that the <a href="beatmap_runner.html"><code>BeatmapRunner</code></a> (and <a href="hit_object_manager.html"><code>HitObjectManager</code></a>) needs to have been set up properly for this to work. To make this easier, some ready-to-use prefabs are available for you to use in the <code>Demo URP Assets.unitypackage</code>. Once extracted, they will be in the <code>MouseDanceDemo URP Assets/Prefabs</code> folder.</p>
<p><img src="../resources/MouseDancePrefabs.png" alt="Prefabs"></p>
<p>There are some variations for use with either a 2d or 3d camera, and with or without post-processing effects. You can also look at the demo scenes to see how it all works.</p>
</div>
<p>After your code calls <a class="xref" href="../api/MouseDance.Runtime.BeatmapRunner.html#MouseDance_Runtime_BeatmapRunner_LoadAndStart_UnityEngine_TextAsset_UnityEngine_AudioClip_"><code>LoadAndStart</code></a>, the <a class="xref" href="../api/MouseDance.Runtime.BeatmapRunner.html"><code>BeatmapRunner</code></a> will handle everything.</p>
<p>The <a href="https://osu.ppy.sh/wiki/en/Client/File_formats/Osu_%28file_format%29">.osu file</a> is actually a text file, so we use <a href="https://docs.unity3d.com/Manual/class-TextAsset.html"><code>TextAsset</code></a> as a straightforward way to get the text data.</p>
<div class="NOTE">
<h5>Note</h5>
<p>If you open an .osu file in Notepad, you'll see all the data inside since it's really just a text file:</p>
<p><img src="../resources/OsuFileInNotepad.png" alt="Osu file in Notepad"></p>
</div>
<p>The .osu file can already specify the relative path to the song to use, but due to how Unity organizes assets, we can't rely on that path during runtime (unless you use <a href="https://docs.unity3d.com/Manual/StreamingAssets.html">StreamingAssets</a>). So BeatmapRunner allows specifying the <a href="https://docs.unity3d.com/Manual/class-AudioClip.html"><code>AudioClip</code></a> directly.</p>
<h2 id="assembly-definition">Assembly Definition</h2>
<p>If your code is using an <a href="https://docs.unity3d.com/Manual/ScriptCompilationAssemblyDefinitionFiles.html">Assembly Definition</a>, you need to add <code>MouseDance.Runtime</code> and <code>OsuParsers</code> in your <a href="https://docs.unity3d.com/Manual/class-AssemblyDefinitionReferenceImporter.html">Assembly Definition References</a>.</p>
<p><img src="../resources/MouseDanceAssemblyDefinitionReference.png" alt="Assembly Definition References"></p>
<h2 id="further-examples">Further Examples</h2>
<p>Refer to the other sections on how to customize particular aspects of the game:</p>
<ul>
<li><a href="custom_countdown.html">Countdown Animation</a></li>
<li><a href="custom_beatmap.html">Customizing the Beatmap</a></li>
<li><a href="getting_results.html">Getting Game Over Event and Results</a></li>
<li><a href="custom_input.html">Custom User-Input Detection</a></li>
<li><a href="custom_scoring.html">Custom Scoring</a></li>
<li><a href="custom_hit_objects.html">Custom Hit Objects</a></li>
<li><a href="custom_hit_rules.html">Custom Hit Rules</a></li>
<li><a href="custom_circle_size.html">Custom Circle Size</a></li>
</ul>
<div class="WARNING">
<h5>Warning</h5>
<p>A note to developers: If you find yourself needing to change the source code inside MouseDance to fit your needs, please contact me first (contact details are in the asset package).</p>
<p>The problem is if you edit MouseDance internal code, and then need to update it to a newer version, you would have to manually resolve the differences between your edits and the newer version of MouseDance.</p>
<p>The proper way to customize MouseDance is using the API: implementing interface callbacks and/or sub-classing and overriding virtual methods. All the sample code shown do it this way. This is more desirable so that your code is separate from the MouseDance internal code.</p>
<p>So if you need to, contact me and I can perhaps create a new virtual method that you can override, a new callback or event that you can subscribe to, or whatever works best for you.</p>
</div>
</article>
              
                </div>
            </main>
        </div>

        
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
<script type="text/javascript" src="../styles/jquery.twbsPagination.js"></script>
<script type="text/javascript" src="../styles/url.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>
<script type="text/javascript" src="../styles/docfx.js"></script>
<script type="text/javascript" src="../styles/main.js"></script>

    </body>

</html>
